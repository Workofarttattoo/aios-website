<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Telescope Suite - Relationship Health & Divorce Risk Predictor</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
            min-height: 100vh;
            color: #e2e8f0;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        header {
            text-align: center;
            margin-bottom: 40px;
            padding: 40px 0;
        }

        header h1 {
            font-size: 3.5rem;
            background: linear-gradient(135deg, #ef4444 0%, #f87171 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 10px;
            font-weight: 700;
        }

        header p {
            font-size: 1.2rem;
            color: #94a3b8;
            max-width: 600px;
            margin: 0 auto;
        }

        .content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 40px;
        }

        .card {
            background: rgba(30, 41, 59, 0.6);
            border: 1px solid rgba(239, 68, 68, 0.2);
            border-radius: 20px;
            padding: 30px;
            backdrop-filter: blur(10px);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        }

        .card h2 {
            font-size: 1.8rem;
            margin-bottom: 20px;
            color: #f87171;
        }

        .form-group {
            margin-bottom: 18px;
        }

        label {
            display: block;
            font-size: 0.95rem;
            margin-bottom: 8px;
            color: #cbd5e1;
            font-weight: 500;
        }

        input[type="number"],
        input[type="text"],
        select {
            width: 100%;
            padding: 12px 16px;
            background: rgba(15, 23, 42, 0.5);
            border: 1px solid rgba(239, 68, 68, 0.3);
            border-radius: 10px;
            color: #e2e8f0;
            font-size: 0.95rem;
            transition: all 0.3s ease;
        }

        input[type="number"]:focus,
        input[type="text"]:focus,
        select:focus {
            outline: none;
            border-color: #ef4444;
            background: rgba(15, 23, 42, 0.8);
            box-shadow: 0 0 0 3px rgba(239, 68, 68, 0.1);
        }

        input[type="range"] {
            width: 100%;
            height: 6px;
            border-radius: 5px;
            background: rgba(239, 68, 68, 0.2);
            outline: none;
            -webkit-appearance: none;
            appearance: none;
        }

        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: linear-gradient(135deg, #ef4444, #f87171);
            cursor: pointer;
            box-shadow: 0 0 10px rgba(239, 68, 68, 0.5);
        }

        input[type="range"]::-moz-range-thumb {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: linear-gradient(135deg, #ef4444, #f87171);
            cursor: pointer;
            border: none;
            box-shadow: 0 0 10px rgba(239, 68, 68, 0.5);
        }

        .slider-value {
            display: inline-block;
            background: rgba(239, 68, 68, 0.2);
            color: #f87171;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.85rem;
            margin-left: 10px;
            font-weight: 600;
        }

        button {
            width: 100%;
            padding: 15px;
            background: linear-gradient(135deg, #ef4444 0%, #f87171 100%);
            color: #fff;
            border: none;
            border-radius: 10px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 20px;
        }

        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(239, 68, 68, 0.4);
        }

        .results {
            display: none;
        }

        .results.active {
            display: block;
        }

        .metric-box {
            background: rgba(239, 68, 68, 0.1);
            border: 1px solid rgba(239, 68, 68, 0.3);
            border-radius: 12px;
            padding: 16px;
            margin-bottom: 15px;
        }

        .metric-label {
            font-size: 0.9rem;
            color: #94a3b8;
            margin-bottom: 8px;
        }

        .metric-value {
            font-size: 1.8rem;
            font-weight: 700;
            color: #f87171;
        }

        .metric-subtext {
            font-size: 0.85rem;
            color: #64748b;
            margin-top: 4px;
        }

        .risk-gauge {
            position: relative;
            width: 180px;
            height: 180px;
            margin: 20px auto;
        }

        .gauge-circle {
            position: absolute;
            width: 100%;
            height: 100%;
            border-radius: 50%;
            border: 8px solid rgba(239, 68, 68, 0.2);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .gauge-fill {
            position: absolute;
            width: 100%;
            height: 100%;
            border-radius: 50%;
            background: conic-gradient(#ef4444 var(--percentage), rgba(239, 68, 68, 0.2) 0);
            animation: fillGauge 1.5s ease-out forwards;
        }

        @keyframes fillGauge {
            from { --percentage: 0; }
            to { --percentage: var(--final-percentage); }
        }

        .gauge-label {
            position: absolute;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
        }

        .gauge-number {
            font-size: 1.8rem;
            font-weight: 700;
            color: #f87171;
        }

        .gauge-text {
            font-size: 0.8rem;
            color: #94a3b8;
        }

        .factor-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin: 15px 0;
        }

        .factor-box {
            background: rgba(239, 68, 68, 0.05);
            border: 1px solid rgba(239, 68, 68, 0.2);
            border-radius: 8px;
            padding: 12px;
        }

        .factor-name {
            font-size: 0.85rem;
            color: #cbd5e1;
            margin-bottom: 6px;
            font-weight: 600;
        }

        .factor-assessment {
            font-size: 0.9rem;
            color: #f87171;
            font-weight: 600;
        }

        .protective-box {
            background: rgba(34, 197, 94, 0.05);
            border-left: 3px solid #22c55e;
        }

        .protective-box .factor-assessment {
            color: #22c55e;
        }

        .warning-box {
            background: rgba(239, 68, 68, 0.05);
            border-left: 3px solid #ef4444;
        }

        .warning-box .factor-assessment {
            color: #ef4444;
        }

        .recommendation-item {
            background: rgba(239, 68, 68, 0.1);
            border-left: 4px solid #ef4444;
            padding: 12px;
            border-radius: 6px;
            margin-bottom: 10px;
            font-size: 0.95rem;
            line-height: 1.5;
        }

        .section-divider {
            border-top: 1px solid rgba(239, 68, 68, 0.2);
            margin: 20px 0;
            padding-top: 20px;
        }

        @media (max-width: 768px) {
            .content {
                grid-template-columns: 1fr;
            }

            header h1 {
                font-size: 2rem;
            }

            .factor-grid {
                grid-template-columns: 1fr;
            }
        }

        .hidden {
            display: none !important;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>üíî Relationship Health & Divorce Risk Predictor</h1>
            <p>Assess relationship health: identify risk factors, protective factors, and personalized intervention strategies</p>
        </header>

        <div class="content">
            <!-- Input Panel -->
            <div class="card">
                <h2>üìã Your Relationship Assessment</h2>

                <div class="form-group">
                    <label for="married">Relationship status</label>
                    <select id="married">
                        <option value="dating">Dating (under 2 years)</option>
                        <option value="engaged">Engaged</option>
                        <option value="married2">Married (2-5 years)</option>
                        <option value="married5">Married (5+ years)</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="communication">Communication quality (1-10)</label>
                    <input type="range" id="communication" min="1" max="10" value="7" step="1">
                    <span class="slider-value"><span id="commValue">7</span>/10</span>
                </div>

                <div class="form-group">
                    <label for="conflict">Conflict resolution ability (1-10)</label>
                    <input type="range" id="conflict" min="1" max="10" value="6" step="1">
                    <span class="slider-value"><span id="conflictValue">6</span>/10</span>
                </div>

                <div class="form-group">
                    <label for="intimacy">Emotional/physical intimacy (1-10)</label>
                    <input type="range" id="intimacy" min="1" max="10" value="7" step="1">
                    <span class="slider-value"><span id="intimacyValue">7</span>/10</span>
                </div>

                <div class="form-group">
                    <label for="financial">Financial stress level</label>
                    <select id="financial">
                        <option value="low">Low - comfortable, aligned</option>
                        <option value="moderate">Moderate - some tension</option>
                        <option value="high">High - significant stress</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="infidelity">Infidelity history</label>
                    <select id="infidelity">
                        <option value="none">None - both faithful</option>
                        <option value="suspected">Suspected / concerns</option>
                        <option value="confirmed">Confirmed infidelity (past)</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="extramarital">External stressors (job loss, health, family)</label>
                    <select id="extramarital">
                        <option value="none">None - stable period</option>
                        <option value="some">Some challenges</option>
                        <option value="significant">Significant stressors</option>
                    </select>
                </div>

                <button onclick="runPrediction()">Assess Relationship Health</button>
            </div>

            <!-- Results Panel -->
            <div class="card results" id="results">
                <h2>üìä Relationship Health Report</h2>

                <div class="risk-gauge">
                    <div class="gauge-fill" id="gaugeOverlay" style="--final-percentage: 0%"></div>
                    <div class="gauge-circle">
                        <div class="gauge-label">
                            <div class="gauge-number" id="divorceRisk">28%</div>
                            <div class="gauge-text">10-Year Divorce Risk</div>
                        </div>
                    </div>
                </div>

                <div class="metric-box">
                    <div class="metric-label">Overall Relationship Health</div>
                    <div class="metric-value" id="healthStatus">Good</div>
                    <div class="metric-subtext" id="healthDetail">Stable with manageable challenges</div>
                </div>

                <div class="metric-box">
                    <div class="metric-label">Predicted Duration (if status quo)</div>
                    <div class="metric-value" id="duration">15+ years likely</div>
                    <div class="metric-subtext">Without major interventions</div>
                </div>

                <div class="section-divider"></div>

                <h3 style="color: #f87171; margin-bottom: 12px; font-size: 1.2rem;">‚ö†Ô∏è Risk Factors</h3>

                <div class="factor-grid" id="riskFactors"></div>

                <div class="section-divider"></div>

                <h3 style="color: #22c55e; margin-bottom: 12px; font-size: 1.2rem;">‚úÖ Protective Factors</h3>

                <div class="factor-grid" id="protectiveFactors"></div>

                <div class="section-divider"></div>

                <h3 style="color: #f87171; margin-bottom: 12px; font-size: 1.2rem;">üö® Red Flags to Watch</h3>
                <div id="redFlagsList"></div>

                <div class="section-divider"></div>

                <h3 style="color: #22c55e; margin-bottom: 12px; font-size: 1.2rem;">üí° Intervention Strategies</h3>
                <div id="interventionsList"></div>
            </div>
        </div>
    </div>

    <script>
        document.getElementById('communication').addEventListener('input', (e) => {
            document.getElementById('commValue').textContent = e.target.value;
        });
        document.getElementById('conflict').addEventListener('input', (e) => {
            document.getElementById('conflictValue').textContent = e.target.value;
        });
        document.getElementById('intimacy').addEventListener('input', (e) => {
            document.getElementById('intimacyValue').textContent = e.target.value;
        });

        function calculateDivorceRisk(married, comm, conflict, intimacy, financial, infidelity, extramarital) {
            let risk = 35; // Base 35% risk

            // Communication helps
            risk -= comm * 2;

            // Conflict resolution helps
            risk -= conflict * 1.5;

            // Intimacy helps
            risk -= intimacy * 1;

            // Financial stress
            if (financial === 'moderate') risk += 8;
            else if (financial === 'high') risk += 15;

            // Infidelity
            if (infidelity === 'suspected') risk += 12;
            else if (infidelity === 'confirmed') risk += 20;

            // External stressors
            if (extramarital === 'some') risk += 5;
            else if (extramarital === 'significant') risk += 12;

            // Years married reduces risk
            if (married === 'married5') risk -= 10;
            else if (married === 'married2') risk -= 5;

            return Math.max(5, Math.min(80, risk));
        }

        function analyzeRelationship(married, comm, conflict, intimacy, financial, infidelity, extramarital, risk) {
            const riskFactors = [];
            const protectiveFactors = [];
            const redFlags = [];
            const interventions = [];

            // Risk factors
            if (comm < 5) riskFactors.push({ name: 'Poor Communication', detail: '+8% risk' });
            if (conflict < 4) riskFactors.push({ name: 'Bad Conflict Resolution', detail: '+10% risk' });
            if (intimacy < 4) riskFactors.push({ name: 'Low Intimacy', detail: '+12% risk' });
            if (financial === 'high') riskFactors.push({ name: 'High Financial Stress', detail: '+15% risk' });
            if (infidelity === 'confirmed') riskFactors.push({ name: 'History of Infidelity', detail: '+20% risk' });
            if (extramarital === 'significant') riskFactors.push({ name: 'Major Life Stressors', detail: '+12% risk' });

            // Protective factors
            if (comm >= 8) protectiveFactors.push({ name: 'Excellent Communication', detail: '-16% risk' });
            if (conflict >= 7) protectiveFactors.push({ name: 'Strong Conflict Skills', detail: '-10% risk' });
            if (intimacy >= 8) protectiveFactors.push({ name: 'Strong Intimacy', detail: '-8% risk' });
            if (financial === 'low') protectiveFactors.push({ name: 'Financial Stability', detail: '-8% risk' });
            if (married === 'married5') protectiveFactors.push({ name: '5+ Years Together', detail: '-10% risk' });

            // Red flags
            if (comm < 4) redFlags.push('üö© Poor communication: difficulty expressing needs, frequent misunderstandings');
            if (conflict < 3) redFlags.push('üö© Unhealthy conflict: avoiding issues, blame language, stonewalling');
            if (infidelity === 'suspected') redFlags.push('üö© Trust concerns: suspected infidelity or boundary violations');
            if (intimacy < 3) redFlags.push('üö© Emotional distance: lack of affection or sexual connection');
            if (financial === 'high') redFlags.push('üö© Financial conflict: disagreement on spending, hiding finances');

            // Interventions
            interventions.push('üí¨ Couples therapy has 80% success rate for at-risk couples. Consider if risk >40%.');
            interventions.push('üìö "The Four Horsemen" framework: Watch for criticism, contempt, defensiveness, stonewalling.');
            if (comm < 7) interventions.push('üí° Improve communication: Active listening, "I feel..." statements, regular check-ins.');
            if (conflict < 6) interventions.push('ü§ù Conflict resolution: Schedule conversations, avoid blaming, focus on solutions.');
            if (intimacy < 7) interventions.push('‚ù§Ô∏è Rebuild intimacy: Date nights, physical affection, vulnerability, quality time.');
            if (financial === 'high') interventions.push('üí∞ Financial alignment: Transparent budgeting, joint goals, address spending differences.');

            return { riskFactors, protectiveFactors, redFlags, interventions };
        }

        function runPrediction() {
            const married = document.getElementById('married').value;
            const comm = parseInt(document.getElementById('communication').value);
            const conflict = parseInt(document.getElementById('conflict').value);
            const intimacy = parseInt(document.getElementById('intimacy').value);
            const financial = document.getElementById('financial').value;
            const infidelity = document.getElementById('infidelity').value;
            const extramarital = document.getElementById('extramarital').value;

            const risk = calculateDivorceRisk(married, comm, conflict, intimacy, financial, infidelity, extramarital);
            const analysis = analyzeRelationship(married, comm, conflict, intimacy, financial, infidelity, extramarital, risk);

            // Update results
            document.getElementById('divorceRisk').textContent = Math.round(risk) + '%';
            document.getElementById('gaugeOverlay').style.setProperty('--final-percentage', `${Math.round(risk)}%`);

            if (risk < 20) {
                document.getElementById('healthStatus').textContent = 'Excellent';
                document.getElementById('healthDetail').textContent = 'Very low risk, strong foundation';
            } else if (risk < 35) {
                document.getElementById('healthStatus').textContent = 'Good';
                document.getElementById('healthDetail').textContent = 'Stable with manageable challenges';
            } else if (risk < 50) {
                document.getElementById('healthStatus').textContent = 'Fair';
                document.getElementById('healthDetail').textContent = 'Significant challenges, intervention recommended';
            } else {
                document.getElementById('healthStatus').textContent = 'At Risk';
                document.getElementById('healthDetail').textContent = 'High risk period, professional help strongly recommended';
            }

            // Duration
            if (risk < 20) document.getElementById('duration').textContent = '20+ years very likely';
            else if (risk < 35) document.getElementById('duration').textContent = '15+ years likely';
            else if (risk < 50) document.getElementById('duration').textContent = '5-15 years uncertain';
            else document.getElementById('duration').textContent = '< 5 years if issues unresolved';

            // Risk factors
            const riskFactorsDiv = document.getElementById('riskFactors');
            riskFactorsDiv.innerHTML = '';
            analysis.riskFactors.forEach(f => {
                const box = document.createElement('div');
                box.className = 'factor-box warning-box';
                box.innerHTML = `<div class="factor-name">${f.name}</div><div class="factor-assessment">${f.detail}</div>`;
                riskFactorsDiv.appendChild(box);
            });

            // Protective factors
            const protectiveDiv = document.getElementById('protectiveFactors');
            protectiveDiv.innerHTML = '';
            analysis.protectiveFactors.forEach(f => {
                const box = document.createElement('div');
                box.className = 'factor-box protective-box';
                box.innerHTML = `<div class="factor-name">${f.name}</div><div class="factor-assessment">${f.detail}</div>`;
                protectiveDiv.appendChild(box);
            });

            // Red flags
            const flagsDiv = document.getElementById('redFlagsList');
            flagsDiv.innerHTML = '';
            analysis.redFlags.forEach(flag => {
                const item = document.createElement('div');
                item.className = 'recommendation-item';
                item.textContent = flag;
                flagsDiv.appendChild(item);
            });

            // Interventions
            const intDiv = document.getElementById('interventionsList');
            intDiv.innerHTML = '';
            analysis.interventions.forEach(int => {
                const item = document.createElement('div');
                item.className = 'recommendation-item';
                item.style.borderLeftColor = '#22c55e';
                item.style.background = 'rgba(34, 197, 94, 0.1)';
                item.style.color = '#e2e8f0';
                item.textContent = int;
                intDiv.appendChild(item);
            });

            document.getElementById('results').classList.add('active');
            document.getElementById('results').scrollIntoView({ behavior: 'smooth', block: 'start' });
        }
    </script>
</body>
</html>
